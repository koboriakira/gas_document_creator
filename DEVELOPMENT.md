# é–‹ç™ºãƒ«ãƒ¼ãƒ«ãƒ»ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

## ğŸš¦ é–‹ç™ºãƒ•ãƒ­ãƒ¼

### å¿…é ˆã®æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—

ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã¯ä»¥ä¸‹ã®æ¤œè¨¼ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã‹ã‚‰å®Œäº†ã¨ã—ã¾ã™ï¼š

```bash
# 1. TypeScriptå‹ãƒã‚§ãƒƒã‚¯ + ãƒªãƒ³ã‚¿ãƒ¼ + ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
npm run validate

# 2. TypeScriptãƒ“ãƒ«ãƒ‰ç¢ºèª
npm run build

# 3. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª
npm run test:coverage
```

### å®Ÿè£…å®Œäº†ã®å®šç¾©

ä»¥ä¸‹ã‚’ã™ã¹ã¦æº€ãŸã—ãŸæ™‚ç‚¹ã§å®Ÿè£…å®Œäº†ã¨ã—ã¾ã™ï¼š

âœ… **ESLintã‚¨ãƒ©ãƒ¼ãªã—** - ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã¨å“è³ªãƒ«ãƒ¼ãƒ«ã«æº–æ‹ 
âœ… **å…¨ãƒ†ã‚¹ãƒˆPASS** - æ—¢å­˜æ©Ÿèƒ½ã®å›å¸°ãŒãªã„
âœ… **æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆè¿½åŠ ** - æ–°ã—ã„æ©Ÿèƒ½ã«ã¯å¯¾å¿œã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
âœ… **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç¶­æŒ** - ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒä½ä¸‹ã—ã¦ã„ãªã„

## ğŸ”§ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

### åŸºæœ¬é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«

```bash
# 1. é–‹ç™ºé–‹å§‹
npm run test:watch     # ãƒ†ã‚¹ãƒˆç›£è¦–ãƒ¢ãƒ¼ãƒ‰ã§é–‹ç™º
npm run build:watch    # TypeScriptãƒ“ãƒ«ãƒ‰ç›£è¦–ãƒ¢ãƒ¼ãƒ‰

# 2. TypeScripté–‹ç™º
# src/index.ts - ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
# src/documentService.ts - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ“ä½œãƒ­ã‚¸ãƒƒã‚¯
# src/requestHandler.ts - ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
# src/responseHelper.ts - ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ

# 3. ã‚³ãƒ¼ãƒ‰ä¿®æ­£æ™‚ã®è‡ªå‹•æ¤œè¨¼
npm run type-check  # TypeScriptå‹ãƒã‚§ãƒƒã‚¯
npm run lint:fix    # ESLintã‚¨ãƒ©ãƒ¼ã®è‡ªå‹•ä¿®æ­£
npm run build       # Code.gsç”Ÿæˆ

# 4. å®Ÿè£…å®Œäº†å‰ã®æœ€çµ‚ç¢ºèª
npm run validate       # type-check + lint + testå®Ÿè¡Œ
npm run test:coverage  # ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
```

### ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# è‡ªå‹•æ¤œè¨¼å¾Œã«ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
npm run deploy      # predeploy hookã§validateãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹
```

## ğŸ“‹ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### ESLintãƒ«ãƒ¼ãƒ«

- **ã‚¹ã‚¿ã‚¤ãƒ«**: Single quotes, 2-space indent, semicolon required
- **å“è³ª**: No unused variables, prefer const, strict equality
- **ES6+**: Arrow functions, template literalsæ¨å¥¨

### ãƒ†ã‚¹ãƒˆè¦ä»¶

- **æ–°æ©Ÿèƒ½**: å¿…ãšå¯¾å¿œã™ã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: æ—¢å­˜ãƒ¬ãƒ™ãƒ«ã‚’ç¶­æŒã¾ãŸã¯å‘ä¸Š
- **ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³**: æ­£å¸¸ç³»ãƒ»ç•°å¸¸ç³»ãƒ»å¢ƒç•Œå€¤ã‚’ç¶²ç¾…

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
src/
â”œâ”€â”€ index.ts              # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆdoPost/doGetï¼‰
â”œâ”€â”€ documentService.ts    # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ“ä½œãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ requestHandler.ts     # ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â””â”€â”€ responseHelper.ts     # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆãƒ˜ãƒ«ãƒ‘ãƒ¼
test/
â””â”€â”€ *.test.ts            # TypeScriptãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
Code.gs                  # è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹GASå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«
build.js                 # TypeScriptâ†’GASå¤‰æ›ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

## ğŸ”„ Git Hooks

### Pre-commit Hook

ã‚³ãƒŸãƒƒãƒˆæ™‚ã«è‡ªå‹•å®Ÿè¡Œï¼š

```bash
# å¤‰æ›´ã•ã‚ŒãŸJSãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿lint + fix
lint-staged
```

### æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Huskyã®åˆæœŸåŒ–ï¼ˆåˆå›ã®ã¿ï¼‰
npm run prepare
```

## ğŸš« ç¦æ­¢äº‹é …

- **ESLintã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹çŠ¶æ…‹ã§ã®ã‚³ãƒŸãƒƒãƒˆ**
- **ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤**
- **ãƒ†ã‚¹ãƒˆãªã—ã§ã®æ–°æ©Ÿèƒ½è¿½åŠ **
- **Code.gsã¨srcãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸æ•´åˆ**

## ğŸ¯ å“è³ªã‚²ãƒ¼ãƒˆ

### CI/CD

GitHub Actionsã§ä»¥ä¸‹ã‚’è‡ªå‹•å®Ÿè¡Œï¼š

1. **Pull Request**: lint + testå®Ÿè¡Œ
2. **Main branch**: lint + test + coverage + deploy

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º

```bash
# é–‹ç™ºä¸­ã®ç¶™ç¶šçš„æ¤œè¨¼
npm run test:watch

# ã‚³ãƒŸãƒƒãƒˆå‰ã®æœ€çµ‚ç¢ºèª
npm run validate
npm run test:coverage
```

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ESLintã‚¨ãƒ©ãƒ¼

```bash
# è‡ªå‹•ä¿®æ­£å¯èƒ½ãªã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£
npm run lint:fix

# æ‰‹å‹•ä¿®æ­£ãŒå¿…è¦ãªã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
npm run lint
```

### ãƒ†ã‚¹ãƒˆå¤±æ•—

```bash
# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å®Ÿè¡Œ
npm test -- documentService.test.js

# è©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±
npm test -- --verbose
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸ä¸è¶³

```bash
# HTMLãƒ¬ãƒãƒ¼ãƒˆã§ã‚«ãƒãƒ¬ãƒƒã‚¸è©³ç´°ã‚’ç¢ºèª
npm run test:coverage
open coverage/lcov-report/index.html
```